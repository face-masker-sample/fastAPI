<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎭</text></svg>">
</head>
<body>
    <header class="header">
        <h1>🎭 {{ title }}</h1>
        <p>무인관제모텔 CCTV 얼굴 마스킹 시스템 v{{ version }}</p>
    </header>

    <main class="dashboard-container">
        <!-- 제어 패널 -->
        <section class="control-panel">
            <h2 class="section-title">🎮 제어 패널</h2>
            
            <div class="control-buttons">
                <button id="start-recording" class="btn btn-success">🔴 녹화 시작</button>
                <button id="stop-recording" class="btn btn-danger" disabled>⏹️ 녹화 중지</button>
                <button id="take-screenshot" class="btn btn-secondary">📸 스크린샷</button>
                <button id="refresh-stats" class="btn btn-primary">🔄 통계 새로고침</button>
            </div>

            <div class="system-status">
                <h3 class="section-title">📊 시스템 상태</h3>
                
                <div class="status-item">
                    <div class="status-indicator status-offline" id="connection-status"></div>
                    <span>연결 상태: </span>
                    <span id="connection-text">연결 중...</span>
                </div>
                
                <div class="status-item">
                    <div class="status-indicator status-offline" id="recording-status"></div>
                    <span>녹화 상태: </span>
                    <span id="recording-text">대기</span>
                </div>
            </div>
        </section>

        <!-- 비디오 디스플레이 -->
        <section class="video-display">
            <h2 class="section-title">📹 실시간 CCTV</h2>
            
            <!-- 비디오 스트림 -->
            <img id="video-stream" class="video-stream" style="display: none;" alt="실시간 CCTV 스트림">
            
            <!-- 연결 대기 플레이스홀더 -->
            <div id="video-placeholder" class="video-placeholder">
                <div>
                    <h3>📡 CCTV 연결 대기 중...</h3>
                    <p>시스템이 웹캠에 연결을 시도하고 있습니다.</p>
                </div>
            </div>
            
            <!-- 비디오 정보 -->
            <div class="video-info">
                <div class="info-item">
                    <div class="info-value" id="fps-value">0.0</div>
                    <div class="info-label">FPS</div>
                </div>
                <div class="info-item">
                    <div class="info-value" id="faces-value">0</div>
                    <div class="info-label">현재 얼굴</div>
                </div>
                <div class="info-item">
                    <div class="info-value" id="recording-indicator">⏹️</div>
                    <div class="info-label">녹화</div>
                </div>
            </div>
        </section>

        <!-- 통계 패널 -->
        <section class="stats-panel">
            <h2 class="section-title">📈 통계</h2>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="total-faces-value">0</div>
                    <div class="stat-label">총 탐지된 얼굴</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-value" id="uptime-value">00:00:00</div>
                    <div class="stat-label">시스템 가동시간</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-value">25 FPS</div>
                    <div class="stat-label">목표 FPS</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-value">0.05</div>
                    <div class="stat-label">탐지 임계값</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-value">1280x720</div>
                    <div class="stat-label">해상도</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-value">25x</div>
                    <div class="stat-label">블러 강도</div>
                </div>
            </div>

            <div style="margin-top: 2rem;">
                <h3 class="section-title">🔧 빠른 설정</h3>
                <div style="font-size: 0.9rem; color: #ccc;">
                    <p>• YOLOv8-Face 모델 사용</p>
                    <p>• 실시간 얼굴 마스킹</p>
                    <p>• WebSocket 스트리밍</p>
                    <p>• 자동 녹화 지원</p>
                </div>
            </div>
        </section>
    </main>

    <!-- API 문서 링크 -->
    <div style="position: fixed; bottom: 20px; left: 20px;">
        <a href="/api/docs" target="_blank" 
           style="background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 8px; color: white; text-decoration: none; backdrop-filter: blur(10px);">
            📚 API 문서
        </a>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html> 